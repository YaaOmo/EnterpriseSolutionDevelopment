/**
 * Fullajax = AJAX & AHAH library
 *
 * version:  1.3.4
 *
 * GPL licenses:
 *    http://www.gnu.org/licenses/gpl.html
 *
 * @author Ruslan Sinitskiy
 * @author Fedir Zinchuk
 *
 * @site https://github.com/Fedik/FullAJAX
 *
 **/if(!window.FLAX||window.FLAX.TYPE!="full"){function log(){FLAX.debug("log",arguments)}function info(){FLAX.debug("info",arguments)}function error(){FLAX.debug("error",arguments)}function warn(){FLAX.debug("warn",arguments)}function id(e){return FLAX.get(e)}function back(e){FLAX.Html.thread[e].go(-1)}function forward(e){FLAX.Html.thread[e].go(1)}function go(e,t){FLAX.Html.thread[t].go(e)}String.trim||(String.prototype.trim=function(){return(this||"").replace(/^\s+|\s+$/g,"")}),String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},String.prototype.endWith=function(e,t){var n=t?this.toLowerCase():this,r=t?e.toLowerCase():e;return n.substring(n.length-r.length,n.length)==r},String.prototype.startWith=function(e,t){var n=t?this.toLowerCase():this,r=t?e.toLowerCase():e;return n.substring(0,r.length)==r},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0;n<this.length;n++)if(this[n]===e)return n;return-1});function abort(e){FLAX.Html.thread[e]&&FLAX.Html.thread[e].abort()}function hax(e,t){t||(t={}),typeof e=="string"?t.url=e:t=e,t.nohistory==null&&(t.nohistory=t.noHistory);var n=FLAX.Html.thread[t.id]?FLAX.Html.thread[t.id]:FLAX.HTMLThread(t.id);return n.setOptions(t,1),FLAX.Html.ASYNCHRONOUS?n.request():(FLAX.Html.storage.push(n.id),FLAX.Html.storage.length==1&&n.request()),n}function get(e,t,n,r,i){return typeof t=="object"?hax(e,t):hax(e,{id:t,form:n,cb:r,cbo:i})}function post(e,t,n,r,i){return typeof t=="object"?(t.method="post",hax(e,t)):hax(e,{method:"post",id:t,form:n,cb:r,cbo:i})}function dax(e,t){t||(t={}),typeof e=="string"?t.url=e:t=e,t.id||(t.id="undefined");var n=FLAX.Data.thread[t.id]?FLAX.Data.thread[t.id]:FLAX.DATAThread(t.id);return n.setOptions(t,1).request(),n}function abortData(e){FLAX.Data.thread[e]&&FLAX.Data.thread[e].abort()}function getData(e,t,n,r,i,s){return dax(e,{cb:t,id:n,cbo:r,anticache:i,destroy:s})}function postData(e,t,n,r,i,s,o){return dax(e,{method:"post",params:t,cb:n,id:r,cbo:i,anticache:s,destroy:o})}window.FLAX||(FLAX=SRAX={}),FLAX.extend=function(e,t,n){var r=!n;for(var i in t)if(r||!e.hasOwnProperty(i))e[i]=t[i];return e},function(e){e.extend(e,{version:"1.3.2",TYPE:"full",Default:{prefix:"ax",sprt:":",sprt_url:":",lvl:"_lvl",loader:"loading",loader2:"loading2",loaderSufix:"_loading",DEBUG_AJAX:0,DEBUG_SCRIPT:0,DEBUG_LINK:0,DEBUG_STYLE:0,USE_FILTER_WRAP:1,USE_HTML5_HISTORY:1,NO_HISTORY:0,USE_HISTORY_CACHE:1,LENGTH_HISTORY_CACHE:100,LINK_REPEAT:0,USE_SCRIPT_CACHE:1,SCRIPT_SRC_REPEAT_APPLY:1,SCRIPT_NOAX:0,RELATIVE_CORRECTION:0,OVERWRITE:0,model2Marker:{ax:"<!-- :ax:",begin:":begin: //-->",end:":end: //-->"},HAX_AUTO_DESTROY:0,HAX_ANTICACHE:0,DAX_AUTO_DESTROY:0,DAX_ANTICACHE:0,CHARSET:"UTF-8"},debug:function(e,t){var n=window.console;if(n&&n[e])n[e].apply(n,t),t[0]&&t[0].stack&&n[e].apply(n,[t[0].stack]);else if(window.runtime){var r=[e+": "+t[0]];for(var i=1,s=t.length;i<s;i++)r.push(t[i]);runtime.trace(r)}},getTime:function(){return(new Date).getTime()},LIST_NO_CACHE_SCRIPTS:[],LIST_NO_LOAD_SCRIPTS:[],LIST_NO_LOAD_LINKS:[],init:function(){var n=navigator.userAgent.toLowerCase();e.browser={webkit:/webkit/.test(n),safari:/safari/.test(n),opera:/opera/.test(n),msie:/msie/.test(n)&&!/opera/.test(n),mozilla:/mozilla/.test(n)&&!/(compatible|webkit)/.test(n),air:/adobeair/.test(n)};if(e.browser.msie)for(var r=0,i=[6,7,8],s=i.length;r<s;r++)(new RegExp("msie "+i[r])).test(n)&&(e.browser.msieV=i[r]);e.addEventsListener(e.History),e.addContainerListener(e.Html),e.addContainerListener(e.Data),e.LoadUnloadContainer={},e.scriptsCache=[[],[]],e.scriptsTemp=[[],[]],e.linksCache=[],e.History.prefixListener.ax=e.go2Hax,e.readyHndlr=[],e.onReady(function(){t.USE_FILTER_WRAP&&e.Filter.wrap(),e.initCPLNLS(),e.initCPLNLL();if(!e.History.isHTML5Enabled()){setInterval(e.History.check,200);if(e.browser.opera){var n=document.createElement("img");n.setAttribute("style","position:absolute;left:-1px;top:-1px;opacity:0;width:0px;height:0px"),n.setAttribute("alt",""),n.setAttribute("src",'javascript:location.href="javascript:FLAX.xssLoading=0;FLAX.History.check()"'),document.body.appendChild(n)}}else setTimeout(function(){e.addEvent(window,"popstate",function(t){if(location.hash)return;e.History.setCurrent(e.getHash());for(var n in e.History.prefixListener)e.History.prefixListener[n]();history.popped=!0})},300);e.Include.parse()}),document._write=document.write,document._writeln=document.writeln,e.write=function(e){document._write(e)},e.writeln=function(e){document._writeln(e)}},initOnReady:function(){if(e.isReadyInited)return;e.isReadyInited=1,e.browser.mozilla||e.browser.opera?e.addEvent(document,"DOMContentLoaded",e.ready):e.browser.msie?function(){try{document.documentElement.doScroll("left")}catch(t){setTimeout(arguments.callee,50);return}e.ready()}():e.browser.safari&&(e.safariTimer=setInterval(function(){if(document.readyState=="loaded"||document.readyState=="complete")clearInterval(e.safariTimer),e.safariTimer=null,e.ready()},10)),e.addEvent(window,"load",e.ready)},onReady:function(t){e.isReady?t():(e.readyHndlr.push(t),e.initOnReady())},ready:function(){if(e.isReady)return;e.isReady=1;for(var t=0,n=e.readyHndlr.length;t<n;t++)try{e.readyHndlr[t]()}catch(r){error(r)}e.readyHndlr=null},addEvent:function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},delEvent:function(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)},get:function(e){return typeof e=="string"?document.getElementById(e):e},clearLNLS:function(){e.LIST_NO_LOAD_SCRIPTS=[]},initCPLNL:function(t){var n=e.getHead().getElementsByTagName(t),r=t=="script"?e.LIST_NO_LOAD_SCRIPTS:e.LIST_NO_LOAD_LINKS;for(var i=0,s=n.length;i<s;i++){var o=n[i].src||n[i].href;if(!o)continue;r.push(o)}},initCPLNLS:function(t){t&&e.clearLNLS(),e.initCPLNL("script")},clearLNLL:function(){e.LIST_NO_LOAD_LINKS=[]},initCPLNLL:function(t){t&&e.clearLNLL(),e.initCPLNL("link")},linkEqual:{},replaceLinkEqual:function(t,n){var r="replaceAll",i=e.linkEqual;n||(t=t[r]("?","[~q~]"));for(var s in i)t=n?t[r](i[s],s):t[r](s,i[s]);return n&&(t=t[r]("[~q~]","?")),t},Model2Blocks:{},IE_XHR_ENGINE:["Msxml2.XMLHTTP","Microsoft.XMLHTTP"],getXHR:function(){if(window.XMLHttpRequest&&(!window.ActiveXObject||location.protocol!="file:"))return new XMLHttpRequest;if(window.ActiveXObject)for(var t=0;t<e.IE_XHR_ENGINE.length;t++)try{return new ActiveXObject(e.IE_XHR_ENGINE[t])}catch(n){}},delHost:function(t){return t&&t.startWith(e.host)&&(t=t.replace(e.host,"")),t},host:location.protocol+"//"+location.host,DaxPreprocessor:function(e){},HtmlPreprocessor:function(e){},XHRThread:function(n){var r={options:{},inprocess:0,id:n,setOptions:function(t,n){return!t.url&&t.src&&(t.url=t.src),!t.cb&&t.callback&&(t.cb=t.callback),t.cbo==null&&t.callbackOps!=null&&(t.cbo=t.callbackOps),t.anticache==null&&t.nocache!=null&&(t.anticache=t.nocache),n&&(s={}),e.extend(s,t),s.async==null&&(s.async=!0),s.url=e.delHost(s.url),this.options=s,r},getOptions:function(){return s},isProcess:function(){return r.inprocess},getXHR:function(){return i||(i=e.getXHR()),i},onProgressXHR:function(){var e=r.getXHR();try{e.onprogress=function(e){r.fireEvent("progress",{id:n,thread:r,event:e,loaded:e.loaded,total:e.total,percent:Math.round(100*e.loaded/e.total)})}}catch(t){}return r},openXHR:function(){var t=r.getMethod(),n=r.getXHR(),i=(e.browser.msie&&location.protocol=="file:"&&s.url.startWith("/")?"file://":"")+s.url;return s.user?n.open(t.toUpperCase(),i,s.async,s.user,s.pswd):n.open(t.toUpperCase(),i,s.async),r},sendXHR:function(n,i,o){var u=r.getMethod(),a=r.getXHR();a.onreadystatechange=s.async?i:function(){};var f="setRequestHeader";s.cut&&a[f]("Ajax-Cut-Block",s.cut),n&&a[f]("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT"),a[f]("Ajax-Engine","Fullajax"),a[f]("X-Requested-With","XMLHttpRequest");if(s.headers)for(var l in s.headers)a[f](l,s.headers[l]);u=="post"&&a[f]("Content-Type","application/x-www-form-urlencoded; Charset="+t.CHARSET),e.showLoading(r.inprocess,r.getLoader()),a.send(u=="post"?o:null),s.async||i()},init:function(){return r.inprocess&&r.abort(),r.inprocess=1,r},getParams:function(){var t=e.createQuery(s.form),n=r.getMethod();return s.params&&(t!=""&&!s.params.startWith("&")&&(t+="&"),t+=s.params),t},buildUrl:function(e,t){var n=r.getMethod();if(n!="post"&&t!="")if(e.indexOf("?")==-1)e+="?"+t;else{var i=t.split("&");for(var s=0,o=i.length;s<o;s++){if(!i[s])continue;var u=i[s].split("="),a=-1,f=e.indexOf("&"+u[0]+"=");f==-1&&(f=e.indexOf("?"+u[0]+"="));if(f>-1){a=e.indexOf("&",f+1);var l=a>-1?e.substring(a+1):"";e=e.substring(0,f+1)+l}}e+=(e.endWith("?")||e.endWith("&")?"":"&")+t}return e},abort:function(){r.inprocess=0;if(!i)return;try{i.isAbort=1,i.abort()}catch(t){}i=null,e.showLoading(0,r.getLoader())},_getLoader:function(t){return r.loader||(r.loader=s.loader==null?e.getLoader(n,t):e.get(s.loader)),r.loader},getMethod:function(){var e=s.method?s.method:s.form?s.form.method:"get";return e&&e.toLowerCase()=="post"?"post":"get"}},i,s=r.options;return e.addEventsListener(r),r},DATAThread:function(n){function o(o){if(!o||!o.readyState)o=r.getXHR();try{if(o.readyState==4){r.inprocess=0,e.showLoading(r.inprocess,r.getLoader());var u=o.isAbort?-1:o.status,a=u>=200&&u<300||u==304||u==0&&location.protocol=="file:",f=o.responseText,l=o.responseXML,c={xhr:o,url:i.url,id:n,status:u,success:a,cbo:i.cbo,callbackOps:i.cbo,options:i,text:f,xml:l,thread:r,responseText:f,responseXML:l,time:e.getTime()-s};r.fireEvent("response",c),u>-1&&e.DaxPreprocessor(c)!==!1&&i.cb&&(i.cb(c,n,a,i.cbo),t.DEBUG_AJAX&&log("callback id:"+n)),(i.destroy!=null?i.destroy:t.DAX_AUTO_DESTROY)&&r.destroy()}}catch(h){error(h),r.fireEvent("exception",{xhr:o,url:i.url,id:n,exception:h,options:i}),r.inprocess=0,e.showLoading(r.inprocess,r.getLoader()),(i.destroy!=null?i.destroy:t.DAX_AUTO_DESTROY)&&r.destroy()}}var r=e.XHRThread(n),i,s;return e.Data.thread[n]=r,e.Data.register(r),r.getLoader=function(){return r._getLoader(1)},r.repeat=function(e){i.params=e,r.request()},r.request=function(){i=r.getOptions();var u=r.getMethod();try{var a={url:i.url,id:n,options:i,thread:r};if(r.fireEvent("beforerequest",a)!==!1){s=e.getTime();var f=r.init().getParams(),l=i.anticache!=null?i.anticache:t.DAX_ANTICACHE;i.url=r.buildUrl(i.url,f),i.text||i.xml?(o({readyState:4,status:i.status==null?200:i.status,responseText:i.text,responseXML:i.xml}),i.text=i.xml=null):r.onProgressXHR().openXHR().sendXHR(l,o,f),t.DEBUG_AJAX&&log(u+" "+i.url+" params:"+f+" id:"+n),r.fireEvent("afterrequest",a)}}catch(c){throw r.abort(),error(c),c}},r.destroy=function(){e.Data.thread[n]=null,delete e.Data.thread[n]},r},showLoading:function(t,n){var r=n?n.style:0;if(r)if(t)r.visibility?r.visibility="visible":r.display="block";else{function i(e,t){for(var r in e){if(e[r].getLoader()!=n)continue;if(e[r]&&e[r].isProcess())return 1}}!i(e.Data.thread,1)&&!i(e.Html.thread)&&(r.visibility?r.visibility="hidden":r.display="none")}},getLoader:function(n,r){var i=e.get;return n&&(n=i((typeof n=="string"?n:n.id)+t.loaderSufix)),n||i(r?t.loader2:t.loader)||i(r?t.loader:t.loader2)},encode:encodeURIComponent,decode:decodeURIComponent,createQuery:function(t,n){t=e.get(t);if(!t)return"";n||(n={});var r=[],i=[],s=e.encode,o=t.getElementsByTagName("input");for(var u=0;u<o.length;u++){var a=o[u],f=a.type.toLowerCase(),l=a.name?a.name:a.id,c=s(a.value);if(!l)continue;l=s(l);switch(f){case"checkbox":case"radio":a.checked&&(r.push(l),i.push(c==null||c==""?a.checked:c));break;default:r.push(l),i.push(c)}}var h=t.getElementsByTagName("select");for(var u=0;u<h.length;u++){var p=h[u],f=p.type.toLowerCase(),l=p.name?p.name:p.id;if(!l||p.selectedIndex==-1)continue;if(f=="select-multiple")for(var d=0,v=p.options.length;d<v;d++)p.options[d].selected&&(r.push(l),i.push(s(p.options[d].value)));else r.push(s(l)),i.push(s(p.options[p.selectedIndex].value))}var m=t.getElementsByTagName("textarea");for(var u=0;u<m.length;u++){var g=m[u],l=g.name?g.name:g.id;if(!l)continue;r.push(s(l)),i.push(s(g.value))}var y=[];for(var u=0,v=r.length;u<v;u++){if(n.skipEmpty&&i[u]=="")continue;y.push(r[u]+"="+i[u])}var b=y.join("&")+(t.submitValue||"");return t.submitValue=null,b},applyParams:function(t,n){if(t.indexOf(" =")!=-1||t.indexOf("= ")!=-1)t=t.replace(/\s*=\s*/g,"=");var r=t.split(" ");for(var i=r.length-1,s=0;i>=s;i--){var o=r[i],u=o.indexOf("=");if(u>-1){var a=e.indexOfAttrMarks(o,u+1),f=o.substring(0,u).trim(),l=o.substring(a[0]+1,a[1]).trim();n[f]=l}else o.indexOf("<")==-1&&o.indexOf(">")==-1&&(n[o]=o)}return n},indexOfAttrMarks:function(e,t){t==null&&(t=0);var n="'",r=e.indexOf(n,t),i=e.indexOf('"',t);i>-1&&(i<r||r==-1)&&(r=i,n='"');if(r>-1)i=e.indexOf(n,r+1);else{r=e.indexOf("="),r++;while(e.substring(r).startWith(" "))r++;e=e.replaceAll(">",""),i=e.length-1;while(e.substring(i,1).endWith(" "))i--;r--,i++}return[r,i]},getParam:function(t,n){var r=t.toLowerCase().indexOf(" "+n);if(r>-1){var i=e.indexOfAttrMarks(t,r+n.length+1);return t.substring(i[0]+1,i[1])}},entitiesConvertor:function(t){return t==null?t:(e.tempDiv||(e.tempDiv=document.createElement("div")),e.tempDiv.innerHTML=t,e.tempDiv[this.browser.msie?"innerText":"textContent"])},makeScript:function(t){t.indexOf("FLAX.init()")>-1&&(t='<script type="text/javascript"></script>');var n=document.createElement("script"),r=t.toLowerCase().indexOf("<script"),i=t.indexOf(">",r+1),s=t.toLowerCase().lastIndexOf("</script>");if(r>-1&&i>-1){var o=t.substring(r,i+1);e.applyParams(o,n)}n.src&&(n.src=e.entitiesConvertor(n.src)),s>-1?t=t.substring(i+1,s):t="";var u=(n.src?n.src:"").trim().toLowerCase(),a=u.startWith("javascript:");if(u=="//:"||a)a&&(t+="\n"+u.substring(11)),n.src="";return t.length>0&&(e.browser.msie?n.text=t:n.appendChild(document.createTextNode(t))),n.id||(n.id=n.src),n},addCss:function(t,n){t.indexOf("{")>-1?e.addStyle("<style>"+t+"</style>",n,n):e.addLink('<link rel="stylesheet" href="'+t+'">',n,n)},addStyle:function(r,i,s){var o=r.toLowerCase().indexOf("<style"),u=r.indexOf(">",o+1),a=r.toLowerCase().indexOf("</style>",u+1),f=r.substring(o,u+1),l=e.applyParams(f,{}),c=l[n("skip")];if(c=="true"||c=="1")return;r=r.substring(u+1,a),o=r.toLowerCase().indexOf("@import ");while(o>-1){u=r.indexOf("(",o+1),a=r.indexOf(")",u+1);var h=r.substring(u+1,a).replace(/["\']/g,"");h='<link rel="stylesheet" type="text/css" href="'+h+'"/>',e.addLink(h,i,s),r=r.substring(0,o)+r.substring(a+1),o=r.toLowerCase().indexOf("@import ")}s&&typeof i=="string"&&(r=e.sealStyle(r,i));if(r.length>0){var p=document.createElement("style");p.type="text/css";if(p.styleSheet)p.styleSheet.cssText=r;else if(e.browser.mozilla||e.browser.opera)p.innerHTML=r;else{var d=document.createTextNode(r);p.appendChild(d)}e.getHead().appendChild(p),t.DEBUG_STYLE&&log("append style:\n "+r)}},sealStyle:function(e,t){t=t.trim();var n=-1,r=e.indexOf("{"),i=(t.startWith(".")||t.startWith("#")?"":"#")+t+" ",s="";while(r>-1)s+=i+e.substring(n+1,r).trim().replaceAll(",",","+i),n=e.indexOf("}",r),n>-1&&(s+=e.substring(r,n+1)),r=n==-1?-1:e.indexOf("{",n);return s},addLink:function(r,i,s){var o=r.toLowerCase().indexOf("<link"),u=r.indexOf(">",o+1);if(o>-1&&u>-1){var a=r.substring(o,u+1),f=document.createElement("link");e.applyParams(a,f),f.href&&(f.href=e.entitiesConvertor(f.href));var l=f[n("skip")];if(l=="true"||l=="1")return;var c=s&&typeof i=="string"?i+":"+f.href:f.href;if(e.indexOfCacheSrc(e.linksCache,c)>-1){var h=f[n("repeat")];if(!t.LINK_REPEAT||h=="false"||h=="0")return}else e.linksCache.push(c);if(e.indexOfCacheSrc(e.LIST_NO_LOAD_LINKS,c)>-1)return;if(s&&f.rel=="stylesheet")try{dax(f.href,{cb:function(t,n,r,i){var s=r?t.responseText:"";e.addStyle("<style>"+s+"</style>",i,1)},id:(i?i+":":"")+f.href,cbo:i});return}catch(p){error("error seal "+f.href)}document.createStyleSheet?document.createStyleSheet(f.href):e.getHead().appendChild(f),t.DEBUG_LINK&&log("append LINK "+f.href)}},isHTMLComment:function(e){var t=e.lastIndexOf("<!--"),n=e.indexOf("-->",t+4);return t>-1&&n==-1},isHTML:function(e){function t(t){var n=e.lastIndexOf("<"+t),r=e.indexOf("</"+t+">",n+1),i=e.indexOf(">",n+1),s=e.indexOf("/>",n+1);return!(n>-1&&i>-1&&r==-1&&s!=i+1)}return e=e.toLowerCase(),t("script")&&t("style")},relativeCorrection:function(t,n,r){n.indexOf("/")==-1&&(n=location.pathname);var i=n.lastIndexOf("/");n=n.substring(0,i+1),i=t.toLowerCase().indexOf(" "+r);while(i>-1){var s=e.indexOfAttrMarks(t,i+2);if(e.isHTML(t.substring(0,i+2))&&s[0]>-1&&s[1]>-1){var o=t.substring(s[0]+1,s[1]);!o.startWith("/")&&!o.startWith("#")&&e.parseUri(o).protocol==""&&(t=t.substring(0,s[0]+1)+n+t.substring(s[0]+1))}i=t.toLowerCase().indexOf(r,i+2)}return t},toSource:function(t){switch(typeof t){case"function":return t.toString();case"string":return'"'+t.replaceAll('"','\\"')+'"';case"object":if(t==null)return null;var n="";if(t instanceof Array){for(var r=0,i=t.length;r<i;r++)n+=","+e.toSource(t[r]);return n.length>0&&(n=n.substring(1)),"["+n+"]"}for(var r in t)n+=","+r+":"+e.toSource(t[r]);return"{"+(n.length>0?n.substring(1):n)+"}"}return t},arrayRemoveOf:function(t,n,r){r&&(n=e.toSource(n));for(var i=0;i<t.length;i++)(r&&n==e.toSource(t[i])||n==t[i])&&t.splice(i--,1);return t},collectionToArray:function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n];return t},indexOfCacheSrc:function(e,t){var n=e.indexOf(t);return n==-1&&(t=t.startWith(location.protocol)?t.replace(location.protocol+"//"+location.host,""):location.protocol+"//"+location.host+t,n=e.indexOf(t)),n},parsingText:function(r){r||(r={});var i=r.owner;if(e.Html.fireEvent(r.id,"beforeload",r)===!1){i.inprocess=0;return}var s=r.text,o=r.id,u=r.url,a=r.add,f="relativeCorrection";s=e.Include.fix(s);if(r.rc==null?t.RELATIVE_CORRECTION:r.rc)s=e[f](s,u,"src"),s=e[f](s,u,"href"),s=e[f](s,u,"action");s=e.parsingLinkAndStyle(s,o,r.seal),s=e.parsingFrameset(s),f="substring";var l=s.toLowerCase().indexOf("<head"),c="";l>-1?(c+=s[f](0,l),s=s[f](l)):(c=s,s="");var h=s.toLowerCase().indexOf("</head>"),p="";h>-1&&(p+=s[f](h+7),s=s[f](0,h+7));var d=e.Html.thread[o],v=d?d.getOptions().notitle:0,m=e.parsingTitle(s,o,v);s=c+m.text+p,a||(s=e.parsingLoadUnload(s,o));var g=e.parsingScript(s,o,i&&i[n("noax")]);new e.loadHtml(o,g.scripts,g.html,u,a,i,r.onload,r.scope,m.title)},parsingLoadUnload:function(t,n){var r,i,s=t.toLowerCase().indexOf("<body");if(s>-1){var o=t.indexOf(">",s+1);if(o>-1){var u=t.substring(s,o+1);r=e.getParam(u,"onload"),i=e.getParam(u,"onunload"),t=t.substring(0,s)+u.replaceAll("load","")+t.substring(o+1)}}var a="LoadUnloadContainer";return e[a][n]||(e[a][n]={}),e[a][n].onload=r,e[a][n].onunload=e[a][n].nextonunload,e[a][n].nextonunload=i,t},parsingTitle:function(t,n,r){var i=t.toLowerCase(),s=i.indexOf("<title>"),o=i.indexOf("</title>",s+1),u;while(s>-1&&o>-1)!e.isHTMLComment(t.substring(0,s))&&!u&&(u=t.substring(s+7,o),r||e.titleChange(u,n)),t=t.substring(0,s)+t.substring(o+8),i=t,s=i.indexOf("<title>",s+1),o=i.indexOf("</title>",s+1);return{text:t,title:u}},titleChange:function(t,n){var r=document.title,i={oldTitle:r,newTitle:t};return e.Html.fireEvent(n,"beforetitlechange",i)!==!1?(document.title=e.entitiesConvertor(t),e.Html.fireEvent(n,"titlechange",i),t):!1},parsingFrameset:function(t){var n=t.toLowerCase().indexOf("<frameset");if(n>-1){var r=t.toLowerCase().indexOf(">",n),i=t.toLowerCase().indexOf("</frameset>");if(r>-1&&i>-1){var s=t.substring(n,i+11),o=e.genId();s="<iframe style='height:100%;width:100%;border:0' href='javascript:true' id='"+o+"'></iframe><script>var obj = FLAX.get('"+o+"');var doc = obj[obj.contentWindow ? 'contentWindow' : 'contentDocument'].document;doc.open();doc.write('"+s.replaceAll("\n","").replaceAll("\r","").trim()+"');doc.close()</script>",t=t.substring(0,n)+s+t.substring(i+11)}}return t},parsingLinkAndStyle:function(t,n,r){var i=t.toLowerCase().indexOf("<link"),s=t.toLowerCase().indexOf("<style"),o="",u=-1,a=-1;i<s&&i>-1||s==-1?(u=i,a=t.indexOf(">",u+1)):(u=s,a=t.toLowerCase().indexOf("</style>",u+1));while(u>-1&&a>-1)u>0&&(o+=t.substring(0,u)),i<s&&i>-1||s==-1?(e.isHTMLComment(t.substring(0,u))||e.addLink(t.substring(u,a+1),n,r),t=t.substring(a+1)):(e.isHTMLComment(t.substring(0,u))||e.addStyle(t.substring(u,a+8),n,r),t=t.substring(a+8)),i=t.toLowerCase().indexOf("<link"),s=t.toLowerCase().indexOf("<style"),i<s&&i>-1||s==-1?(u=i,a=t.indexOf(">",u+1)):(u=s,a=t.toLowerCase().indexOf("</style>",u+1));return t.length>0&&(o+=t),o},parsingScript:function(r,s,o){var u=r.toLowerCase(),a=u.indexOf("<script"),f=u.indexOf("</script>",a+1),l=9,c=r.indexOf(">",a+1),h=r.indexOf("/>",a+1);c>-1&&h!=-1&&c==h+1&&(f=h,l=2);var p=[],d=[],v=0,m;while(a>-1&&f>-1){a>0&&p.push(r.substring(0,a));var g=e.makeScript(r.substring(a,f+l));o&&(g[n("noax")]=1),r=r.substring(f+l),u=r.toLowerCase(),a=u.indexOf("<script"),f=u.indexOf("</script>",a+1),l=9,c=r.indexOf(">",a+1),h=r.indexOf("/>",a+1),c>-1&&h!=-1&&c==h+1&&(f=h,l=2);if(p.length==0||!e.isHTMLComment(p.join(""))){if(p.length==0||p[p.length-1].indexOf("_place_of_script_")==-1)m=s+"_place_of_script_"+v++,p.push(i(m));g.place=m;var y=e.get(m);y&&(y.id+="_old");var b=g[n("skip")];if(b=="true"||b=="1")continue;if(g.src){if(g.src.indexOf("fullajax.js")>-1||g.src.indexOf("fullajax.min")>-1||e.indexOfCacheSrc(e.LIST_NO_LOAD_SCRIPTS,g.src)>-1)continue;var w=e.indexOfCacheSrc(e.scriptsCache[0],g.src);if(w>-1){var E=g[n("repeat")];(E==null||E!="false"&&E!="0")&&t.SCRIPT_SRC_REPEAT_APPLY?(e.scriptsCache[1][w].place=g.place,g=e.cloneScript(e.scriptsCache[1][w])):g=e.makeScript('<script type="text/javascript">//no repeat '+g.src+"</"+"script>")}else try{e.Data.thread[g.src]&&e.Data.thread[g.src].isProcess()?g=e.Data.thread[g.src].options.cbo:t.SCRIPT_NOAX||g[n("noax")]?g.xss=1:new e.startLoadScript(g)}catch(S){error(S)}}var x=n("head"),T=g[x];u=r.toLowerCase(),g[x]=T==null?u.indexOf("<head")==-1&&u.indexOf("</head>")>-1:T=="1"||T=="true",d.push(g)}}return r.length>0&&p.push(r),{scripts:d,html:p}},finishLoadScript:function(r,i,s,o){var u=s?r.responseText:"",a=e.makeScript('<script type="text/javascript">'+u+"</"+"script>");a.place=o.place,a.id=o.id?o.id:i;var f=e.indexOfCacheSrc(e.scriptsTemp[0],i);f==-1&&(f=e.scriptsTemp[0].length),e.scriptsTemp[0][f]=i,e.scriptsTemp[1][f]=a,t.USE_SCRIPT_CACHE&&e.indexOfCacheSrc(e.LIST_NO_CACHE_SCRIPTS,i)==-1&&!o[n("nocache")]&&(f=e.indexOfCacheSrc(e.scriptsCache[0],i),f==-1&&(f=e.scriptsCache[0].length),e.scriptsCache[0][f]=i,e.scriptsCache[1][f]=e.cloneScript(a))},isXss:function(t){return t=(t||"").toLowerCase(),(t.startWith("http:")||t.startWith("https:"))&&!t.startWith(e.host)},startLoadScript:function(t){try{var r=t.src;if(e.isXss(r))throw"xss";dax(r,{cb:e.finishLoadScript,id:r,cbo:t,anticache:t[n("nocache")]})}catch(i){t.id||(t.id=t.src),t.xss=t.src}},cloneScript:function(e,t){t||(t={});var r=document.createElement("script"),i=["src","type","language","defer","text","id","place",n("repeat"),n("noax"),n("skip"),n("head"),n("noblock")];for(var s=0,o=i.length;s<o;s++)try{var u=e[i[s]];t[i[s]]!=null&&(u=t[i[s]]),u!=null&&u!=""&&(r[i[s]]=u)}catch(a){}return r},serialApplyScripts:function(t,r,i,s){var o=0;this.checkload=function(){if(o>=t.length){e.docWriteTraper.apply(r);if(!e.xssLoading&&!(o>=1?t[o-1].inprocess||t[o-1].countproc:0))return s?s():null}else{if(t[o].src){var u=e.indexOfCacheSrc(e.scriptsTemp[0],t[o].src);if(u>-1&&(!t[o][n("noax")]||!t[o][n("nocache")])){var a=t[o].place;t[o]=e.cloneScript(e.scriptsTemp[1][u]),t[o].place=a}}!t[o].src&&(o>0?!t[o-1].inprocess:1)?(new e.addScript(t[o],r,i),e.docWriteTraper.apply(r),o++):t[o].src&&!e.xssLoading&&(t[o].loaded?(e.docWriteTraper.apply(r),o++):t[o].xss&&(t[o].xss=0,new e.addScript(t[o],r,i)))}var f=this;this.recall=function(){f.checkload()},setTimeout(this.recall,10)},this.checkload()},loadHtml:function(r,s,o,u,a,f,l,c,h){e.removeScripts(s);var p={id:r,scripts:s,html:o,url:u,add:a,owner:f,scope:c,title:h};e.Html.fireEvent(r,"unload",p),a||e.execUnloadBody(r);var d=[],v=[],m=[];for(var g=0;g<s.length;g++){var y=s[g],b=y[n("head")],w=b?d:v;w.push(y),b&&m.push(i(y.place))}m.length&&e[a?"addTo":"writeTo"](m,r),new e.serialApplyScripts(d,r,u,function(){e[e.Model2Blocks[r]?"paintHtml2":"paintHtml"](o.join(""),r,u,a),a||e.Effect.use(r),new e.serialApplyScripts(v,r,u,function(){if(t.USE_FILTER_WRAP){var n=e.Model2Blocks[r];if(n)for(var i in n){var s=e.get(n[i]);s&&e.Filter.wrap(s,u)}else e.Filter.wrap(r,u)}e.Include.parse(),f&&(f.inprocess=0,f.countproc&&f.countproc--),a||(e.execLoadBody(r,u),e.execFunc(l,[p],c)),e.Html.fireEvent(r,"load",p);var o=e.Html.thread[r];!e.Html.ASYNCHRONOUS&&e.Html.storage[0]==r&&(e.Html.storage.splice(0,1),e.Html.storage.length>0&&o.request()),o&&e.showLoading(0,o.getLoader())})})},execLoadBody:function(r,i){e.LoadUnloadContainer[r].onload&&e.parsingText({id:r,url:i,text:'<script id="'+n("script"+t.sprt+"temp")+'" type="text/javascript">'+e.LoadUnloadContainer[r].onload+"</"+"script>",add:1}),e.isCOL&&window._onload()},captureOnLoad:function(){window.onloadHandlers=[],window._onload=function(){var e=window.onloadHandlers;window.onloadHandlers=[],e.push(window.onload),window.onload=null;for(var t=0,n=e.length;t<n;t++)try{e[t]&&e[t]()}catch(r){error(r)}},window.onloadHandlers.push(window.onload),window.onload=function(){window.onload=null,window._onload()},window._addEvent=window[window.attachEvent?"attachEvent":"addEventListener"],window.addEventListener=window.attachEvent=function(e,t,n){e=="load"?window.onloadHandlers.push(t):window._addEvent(e,t,n)},e.isCOL=1},execUnloadBody:function(t,n){var r=e.LoadUnloadContainer[t],i=n?"nextonunload":"onunload";e.execFunc(r[i]),r[i]=null},paintHtml:function(t,n,r,i){var s={html:t,id:n,url:r,add:i};i?e.Html.fireEvent(n,"beforepaintadd",s)!==!1&&(e.addTo(t,n),e.Html.fireEvent(n,"afterpaintadd",s)):e.Html.fireEvent(n,"beforepaint",s)!==!1&&(e.writeTo(t,n),e.Html.fireEvent(n,"afterpaint",s))},paintHtml2:function(n,r,i,s){var o=e.Model2Blocks[r],u=t.model2Marker,a=n.indexOf(u.ax),f=n.indexOf(u.begin,a+1),l=n.indexOf(u.ax,f+1),c=n.indexOf(u.end,l+1);while(a>-1&&f>-1&&l>-1&&c>-1){var h=n.substring(a+u.ax.length,f),p=n.substring(f+u.begin.length,l);if(o[h]){var d={html:p,id:h,url:i,block:o[h],add:s};s?e.Html.fireEvent(r,"beforepaintadd",d)!==!1&&(e.addTo(p,o[h]),e.Html.fireEvent(r,"afterpaintadd")):e.Html.fireEvent(r,"beforepaint",d)!==!1&&(e.writeTo(p,o[h]),e.Html.fireEvent(r,"afterpaint"))}a=n.indexOf(u.ax,c+1),f=n.indexOf(u.begin,a+1),l=n.indexOf(u.ax,f+1),c=n.indexOf(u.end,l+1)}},docWriteTraper:new function(){var t={},n={},i={};this.add=function(e,r,s,o){o.inprocessTO&&clearTimeout(o.inprocessTO),o.inprocess=1,t[r]=o,n[r]=s,i[r]||(i[r]=""),i[r]+=e,this.checkMutiLine(r)},this.checkMutiLine=function(e){var t=i[e],n=t.indexOf("<");while(n>-1){var r=1,s=t.charAt(n+r).trim();while(s!=""&&s!=">"){if(s=="/"&&t.charAt(n+r+1)==">"){this.apply(e);return}s=t.charAt(n+ ++r).trim()}var o=t.substring(n+1,n+r),u=t.indexOf("</"+o+">",n);if(u>-1){this.apply(e);break}var a=t.indexOf(">",n+1+o.length);if(a>-1&&(o=="img"||o=="input"||o=="br"||o=="hr")){this.apply(e);return}n=t.indexOf("<",n+1)}},this.apply=function(s){if(!i[s])return;var o=i[s];delete i[s],t[s].countproc?t[s].countproc++:t[s].countproc=1,r(e.get(t[s].place),1),e.parsingText({text:o,id:t[s].place,url:n[s],add:1,owner:t[s]})},this.applyAll=function(){for(var t in i)i[t]&&e.docWriteTraper.apply(t)}},addScript:function(i,s,o,u,a,f,l){typeof i=="object"&&i.nodeName!="SCRIPT"&&(s=i.callback||i.cb,o=i.noax,a=i.place,u=i.anticache==null?i.nocache:i.anticache,f=i.storage,l=i.noblock,i=i.src||i.url);if(e.Storage&&(f==null?t.USE_STORAGE:f)&&e.Storage.isPosible()&&!e.Storage.isReady){e.Storage.onReady(function(){e.addScript(i,s,o,u,a,f)});return}if(typeof i=="string"){var c=document.createElement("span");c.cb=s?s:function(){},c.id=e.genId(),c.style.display="none",r(c,1);var h=document.getElementsByTagName("script");a=e.get(a);if(a)a.innerHTML="",a=a.appendChild(c);else for(var p=0,d=h.length;p<d;p++){var v=h[p].innerHTML,m=v.indexOf("FLAX.addScript");if(m>-1){var g=v.indexOf(i);if(g>m){a=h[p].place?e.get(h[p].place):h[p];break}}}a?a.parentNode.insertBefore(c,a):document.body.appendChild(c),hax({id:c.id,url:i,html:"<body onload=\"FLAX.get('"+c.id+'\').cb()"><script type="text/javascript" src="'+i+'"'+(o?" "+n("noax")+'="1"':"")+(u?" "+n("nocache")+'="1"':"")+(l?" "+n("noblock")+'="1"':"")+"></script></body>",nohistory:1,storage:f});return}e.docWriteTraper.apply(s),document.write=function(t){e.docWriteTraper.add(t,s,o,i)},document.writeln=function(e){document.write(e+"\n")};if(t.DEBUG_SCRIPT){var y=i.id;if(!y||y=="")y=i.innerHTML.trim().substring(0,100)+"\n...";log("append script:\n"+y)}i.src&&(i.inprocess=1,e.xssLoading=!i[n("noblock")],i.onerror=i.onload=i.onreadystatechange=function(){var t=this;!t.loaded&&(!t.readyState||t.readyState=="loaded"||t.readyState=="complete")&&(t.loaded=1,t.onerror=t.onload=t.onreadystatechange=null,e.xssLoading=0,t.inprocessTO=setTimeout(function(){t.inprocess=0},100))}),e.getHead().appendChild(i)},evalScript:function(t){try{e.browser.safari?(window._evalCode=t,new e.addScript(e.makeScript('<script type="text/javascript">eval(window._evalCode)</script>'))):window.execScript?window.execScript(t):window.eval(t)}catch(n){return error(n),0}return 1},removeScripts:function(r){var i=e.getHead().getElementsByTagName("script"),s=[];for(var o=0,u=r.length;o<=u;o++){if(o<r.length&&typeof r[o]=="string")continue;var a=o<r.length?r[o].id:n("script"+t.sprt+"temp");for(var f=0,u=i.length;f<u;f++)if(a?i[f].id==a:i[f].innerHTML==r[o].innerHTML){s.push(i[f]);break}}for(var o=0,u=s.length;o<u;o++)s[o].parentNode&&(t.DEBUG_SCRIPT&&log("remove script "+(s[o].id?s[o].id:s[o].innerHTML)),s[o].parentNode.removeChild(s[o]))},execFunc:function(t,n,r){if(t instanceof Array)for(var i=0,s=t.length;i<s;i++)e.execFunc(t[i],n,r);else if(t)try{r||(r=window);if(typeof t=="string"){t=t.trim(),t.startWith("function")&&t.endWith("}")&&(t=e.browser.msie?"FLAX.tmp="+t:"("+t+")"),function(){t=window.eval(t)}.call(r);if(typeof t!="function")return}t.apply(r,n)}catch(o){error(o)}},HTMLThread:function(n){function o(o){if(!o||!o.readyState)o=r.getXHR();try{if(o.readyState==4){var a=o.isAbort?-1:o.status,f=a>=200&&a<300||a==304||a==0&&location.protocol=="file:",l=o.responseText;try{var c=[],h={};try{c=o.getAllResponseHeaders().split("\n")}catch(p){}for(var d=0,v=c.length;d<v;d++){var m=c[d].indexOf(":");m>-1&&(h[c[d].substring(0,m).toLowerCase()]=c[d].substring(m+2))}var g=h["content-type"];if(g){var y=["application/x-javascript","application/javascript","text/javascript","application/json","text/json"];for(var d=0,v=y.length;d<v;d++)if(g.indexOf(y[d])>-1){l="<script>"+l+"</script>",i.add=1;break}}}catch(b){}var w={xhr:o,url:i.url,id:n,status:a,success:f,cbo:i.cbo,callbackOps:i.cbo,options:i,text:l,thread:r,responseText:l,time:e.getTime()-s};r.fireEvent("response",w),a>-1&&e.HtmlPreprocessor(w)!==!1&&(i.cb&&(e.execFunc(i.cb,[w,n,f,i.cbo],i.scope),t.DEBUG_AJAX&&log("callback id:"+n)),r.inprocess=0,f?(w.text?(u.add(w.url,w.text,i),r.inprocess=1,e.parsingText({owner:r,text:w.text,id:n,url:i.url,add:i.add,rc:i.rc,seal:i.seal,onload:i.onload,scope:i.scope})):(warn("empty response: "+n+" => "+i.url),e.Effect.use(n)),t.DEBUG_AJAX&&log("response ok:"+i.url)):(e.execFunc(i.onerror,[i],i.scope),e.showMessage(i.url,o.status,o.statusText),e.Effect.use(n))),e.showLoading(r.inprocess,r.getLoader()),(i.destroy!=null?i.destroy:t.HAX_AUTO_DESTROY)&&r.destroy()}}catch(b){error(b),r.fireEvent("exception",{xhr:o,url:i.url,id:n,exception:b,options:i}),e.Effect.use(n),r.inprocess=0,e.showLoading(r.inprocess,r.getLoader()),(i.destroy!=null?i.destroy:t.HAX_AUTO_DESTROY)&&r.destroy()}}var r=e.XHRThread(n),i,s;e.Html.thread[n]=r,e.Html.register(r),r.getLoader=r._getLoader,r.repeat=function(e,t,n){i.form=e,i.nohistory=t,i.params=n,r.request()},r.request=function(){i=r.getOptions();var a=r.getMethod();try{var f={url:i.url,id:n,options:i,thread:r};if(r.fireEvent("beforerequest",f)!==!1){var l=function(){s=e.getTime();var f=r.init().getParams(),l=location.href.indexOf("#"),c=l==-1?location.href:location.href.substring(0,l),h=i.html!=null||c.endWith(i.url)||(i.anticache!=null?i.anticache:t.HAX_ANTICACHE);i.url=r.buildUrl(i.url,f),l=u.getIndex(i.url);var p=null;!h&&l>-1&&a!="post"&&(i.html=u.storage[l][1],p=1);if(i.html)o({readyState:4,status:200,responseText:i.html,cache:p}),i.html=null;else try{r.onProgressXHR().openXHR().sendXHR(h,o,f)}catch(d){throw e.Effect.use(n),d}t.DEBUG_AJAX&&log(a+" "+i.url+" params:"+f+" id:"+n)};e.Effect.use(n,1,l)||l(),r.fireEvent("afterrequest",f)}}catch(c){throw r.abort(),error(c
),c}},r.destroy=function(){e.Html.thread[n]=null,delete e.Html.thread[n]};var u=r.history={storage:[],startPageHtml:null,startPageOps:null,startPageUrl:null,current:0,currentUrl:function(){return this.storage.length==0||this.current<=0?null:this.storage[u.current][0]},add:function(r,s,o){r=decodeURIComponent(r),r.href&&(r=r.href),this.current++;var a=location.host,f=r.indexOf(a);f>-1&&(r=r.substring(f+a.length)),r=e.replaceLinkEqual(r),i.startpage&&(i.startpage=0,u.startPageHtml=s,u.startPageUrl=r,u.startPageOps=e.extend({},i),e.History.setCurrent(e.getHash()));var l=i.nohistory!=null?!i.nohistory:!t.NO_HISTORY;if(u.startPageHtml==null){var c=["<head><title>"+document.title+"</title></head>"],h=e.Model2Blocks[n];if(h)for(var p in h){var d=e.get(h[p]);if(d){var v=d.innerHTML,m=t.model2Marker.ax,g=m+p+t.model2Marker.begin,y=m+p+t.model2Marker.end;v=v.replaceAll(g,"").replaceAll(y,""),c.push(g+v+y)}}else{var d=e.get(n);d||(d=document.body),c.push(d.innerHTML)}u.startPageHtml=c.join(""),u.startPageUrl=location.href}if(l){var b=e.parsingTitle(s,n,1).title;e.History.add(n,r,null,b)}this.current>t.LENGTH_HISTORY_CACHE&&(this.current--,this.storage.splice(0,1)),this.storage.length=this.current,this.storage.push([e.replaceLinkEqual(r,1),s,o])},get:function(e){return this.storage[e]},getIndex:function(e,t){for(var n=t||0,r=this.storage.length;n<r;n++)if(this.storage[n]!=null&&e==this.storage[n][0])return n;return-1}};return r.go2History=function(n){if(u.currentUrl()!=n){var s=i.historycache!=null?i.historycache:t.USE_HISTORY_CACHE;if(!s||!r.go2UrlHistory(n)){n=e.replaceLinkEqual(n,1);var o=u.getIndex(n,2),a={url:n,nohistory:1};o>-1&&e.extend(a,u.storage[o][2],1),r.setOptions(a,o>-1).request()}}},r.go2UrlHistory=function(t){var n=u.getIndex(t);if(n>-1)return r.go(n-u.current),e.History.setCurrent(e.getHash()),!0},r.go=function(t){var s=u.current+t;s<0?s=0:s>u.storage.length-1&&(s=u.storage.length-1);if(s==0)return r.go2StartPage();u.current=s;var o=u.storage[s],a=o[0],f=o[1],l=o[2]||i;a&&f&&e.parsingText({owner:r,text:f,id:n,url:u.storage[s][0],add:l.add,rc:l.rc,seal:l.seal,onload:l.onload,scope:l.scope})},r.go2StartPage=function(){var t=u;if(t.startPageHtml){var s=e.extend({startpage:1,owner:r,text:t.startPageHtml,id:n,url:t.startPageUrl},t.startPageOps||i,1);e.parsingText(s)}u.current=0},r.getSrartPageUrl=function(){return u.startPageUrl},r},replaceHref:function(){var t=location,n=t.href,r=n.indexOf("#");r>-1&&n.length>r+1&&t.replace(n.substring(0,r)+e.replaceLinkEqual(n.substring(r)))},go:function(t,n){var r=e.parseAxHash(t);for(var i in r)hax(e.extend({id:i,url:r[i]},n))},directLink:function(){e.onReady(function(){e.replaceHref();var n=e.getHash();if(n.length&&e.History.isHTML5Enabled()){n=e.replaceLinkEqual(n,1);var r=new RegExp(t.sprt_url+t.prefix+t.sprt_url+"[A-Za-z0-9_-]+"+t.sprt_url,"g"),i=n.replace("#","").replace(r,"");history.replaceState(null,null,i)}e.History.setCurrent(n),e.go2Hax(1,n)})},isDirectLink:function(t){var n=e.parseAxHash(e.getHash());if(t)return!!n[t];for(var r in n)return!0;return!1},go2Hax:function(t,n){var r=e.parseAxHash(e.History.previous);n||(n=e.History.current);var i=e.parseAxHash(n),s=0,o={oldHash:e.History.previous,newHash:e.History.current};for(var u in i){s++;if(r[u]==i[u]){r[u]=null;continue}r[u]=null,o.id=u,o.url=i[u];if(e.Html.fireEvent(u,"beforehistorychange",o)===!1)continue;if(e.Html.thread[u]){var a=function(){e.Html.thread[u].go2History(i[u])};e.Effect.use(u,1,a)||a()}else{var f=e.replaceLinkEqual(i[u],1),l=e.parseUri(f),o=e.Filter.getOptions(l.path,l.query);ind=f.indexOf("?");if(ind>-1&&o&&o.params){var c="&"+f.substring(ind+1)+"&",h=o.params.split("&");for(var p=0;p<h.length;p++)c.indexOf("&"+h[p]+"&")>-1&&h.splice(p--,1);o.params=h.join("&")}o||(o={}),o.id=u,o.nohistory=t,o.startPage=t,hax(f,o)}}for(var u in r)if(r[u]&&e.Html.thread[u]){o.id=u,o.url=e.Html.thread[u].getSrartPageUrl(),o.startpage=1;if(e.Html.fireEvent(u,"beforehistorychange",o)===!1)continue;var a=e.Html.thread[u].go2StartPage;e.Effect.use(u,1,a)||a()}return i.size=s,i},makeAxHash:function(n,r,i,s){s||(s="ax");var o=r.id||r,u=t.sprt_url,a=u+s+u+o+u,f=n.indexOf(a);if(f>-1){var l=n.substring(f),c=l.indexOf(u,f+a.length);while(c>-1&&l.substring(c,c+2)==u+"/")c=l.indexOf(u,c+1);c>-1&&(l=l.substring(0,c)),n=n.replace(l,a+i)}else n=a+i;return e.makeAxLevel((n.startWith("#")?"":"#")+n,s,o)},makeAxLevel:function(e,n,r){var i=r.indexOf(t.lvl);if(i>-1){var s=t.lvl.length,o=t.sprt_url,u=parseInt(r.substring(i+s)),a=o+n+o,f=e.indexOf(a);while(f>-1){var l=e.indexOf(o,f+a.length),c=e.substring(f+a.length,l),h=c.indexOf(t.lvl);if(h>-1){var p=parseInt(c.substring(h+s));if(p>u){var d=e.indexOf(o,l+1);e=e.substring(0,f)+(d>-1?e.substring(d):""),l=f-1}}f=e.indexOf(a,l+1)}}return e},attrs:["id","src","url","method","form","params","callback","cb","callbackOps","cbo","nohistory","cut","rc","overwrite","destroy","html","anticache","nocache","startpage","async","historycache","seal","user","pswd","storage","etag","headers","add","target","onload","loader"],parseAttr:function(t,n){var r=null,i=t.attributes;if(!i)return r;n||(n="");for(var s=0,o=(e.browser.msie?e.attrs:i).length;s<o;s++){var u=e.browser.msie?i[n+e.attrs[s]]:i[s];if(u&&u.nodeName.startWith(n)){var a=u.nodeName.substring(n.length),f=u.nodeValue;f=f=="1"||f=="true"?1:f=="0"||f=="false"?0:f,r||(r={}),r[a]=f}}return r},parseAxHash:function(n,r){r||(r="ax");var i={},s=t.sprt_url;if(!n)return i;n=e.replaceLinkEqual(n,1);var o=n.indexOf(s+r+s);while(o>-1){var u,a=n.indexOf(s,o+r.length+2);a>-1?u=n.substring(o+r.length+2,a):a=o,o=n.indexOf(s+r+s,a+1);var f=n.substring(a+1),l=f.indexOf(s);while(l>-1&&f.substring(l,l+2)==s+"/")l=f.indexOf(s,l+1);l>-1&&(f=f.substring(0,l)),f&&u&&(i[u]=f)}return i},getHead:function(){return document.getElementsByTagName("head")[0]},getHash:function(){return e.History.isHTML5Enabled()&&history.state&&history.state.fullajax?history.state.fullajax.hash||"":location.hash2||location.hash},setHash:function(e){var t=location;t.hash=e;if(t.hash2||decodeURIComponent(t.hash)!=decodeURIComponent(e))t.hash2=e},History:{previous:null,current:null,setCurrent:function(t){e.History.previous=e.History.current,e.History.current=t},prefixListener:{},check:function(){var t=e.getHash(),n=e.History.current;if(e.browser.msie&&e.History.frame){var r=e.replaceLinkEqual(t);if(r!=n&&r!="#"+n)e.History.write(document.title,r);else{var i=e.History.frame,s=(i.contentWindow||i.contentDocument).document.body,o=e.replaceLinkEqual(s.innerText);o!=n&&"#"+o!=n&&(t=o,e.setHash(t))}}var t=e.replaceLinkEqual(t);if(n!=null&&t!=n){e.History.setCurrent(t);for(var u in e.History.prefixListener)e.History.prefixListener[u]()}},write:function(t,n){var r=e.History.frame,i=(r.contentWindow||r.contentDocument).document;i.open(),i.write("<head><title>"+(t||"")+"</title></head><body>"+n+"</body>"),i.close()},add:function(t,n,r,i){var s=e.replaceLinkEqual(e.getHash(),1);s=e.makeAxHash(s,t,n,r);var o=e.replaceLinkEqual(s),u=e.History.fireEvent("beforeadd",{hash:s,rhash:o,id:t,url:n,prefix:r});if(u===!1)return;typeof u=="string"&&(o=e.replaceLinkEqual(u));if(this.isHTML5Enabled())history.popped?history.popped=!1:history.pushState({fullajax:{id:t,hash:s}},i,n);else{e.setHash(o);if(e.browser.msie&&e.browser.msieV<8){var a=e.History.frame;a||(e.History.frame=a=document.createElement("iframe"),a.style.display="none",a.src="javascript:true",document.body.appendChild(a),e.History.write(document.title,e.History.previous||"")),e.History.write(i,o)}}e.History.setCurrent(o)},isHTML5Enabled:function(){return history.pushState&&t.USE_HTML5_HISTORY}},Effect:{effects:{},add:function(t){t||(t={}),t.id||(t.id="document.body");var n=e.Effect.effects[t.id];n||(n=[]),n.push(t),e.Effect.effects[t.id]=n},get:function(t){t||(t="document.body");for(var n in e.Effect.effects)if(n==t||n=="*")return e.Effect.effects[n]},use:function(t,n,r){try{var i=e.Effect.get(t);if(i)for(var s=0,o=i.length;s<o;s++){var u=s==i.length-1?r:null;if(!i[s])continue;n?i[s].start&&i[s].start(t,u):i[s].end&&i[s].end(t,u)}return!!i}catch(a){error(a)}}},Filter:{schema:{},add:function(e){e||(e={}),e.id||(e.id="document.body"),this.remove(e);var t=this.schema[e.id];return t||(t=[]),t.push(e),this.schema[e.id]=t,this},remove:function(t){t||(t={}),t.id||(t.id="document.body");var n=this.schema[t.id];if(!n)return;e.arrayRemoveOf(n,t,1),this.schema[t.id]=n},clear:function(e){this.schema[e?e:"document.body"]=null},clearAll:function(){for(var e in this.schema)delete this.schema[e]},getOptions:function(e,t,n){function u(e,t,n){var r=0;for(var i=0,s=e.length;i<s;i++){var o=e[i],u=o&&t&&(o=="*"||o instanceof RegExp&&o.test(t)||(!n||n=="contain")&&t.indexOf(o)>-1||n=="start"&&t.startWith(o)||n=="end"&&t.endWith(o));u&&r<o.length&&(r=o.toString().length)}return r}function a(e,t){if(!t)return null;var n="id";t.indexOf(".")===0&&(n="class",t=t.replace(".",""));for(var r=e.parentNode;r&&r!==document.body;r=r.parentNode){var i=r.getAttribute(n);if(i&&i.indexOf(t)!==-1)return r}return null}var r=null,i=0,s=n?n.getAttribute("name"):null,o=n?n.getAttribute("id"):null;for(var f in this.schema){var l=this.schema[f];if(!l)continue;for(var c=0,h=l.length;c<h;c++){var p=l[c].url instanceof Array?l[c].url:[l[c].url],d=u(p,e,l[c].urlType),v=l[c].query instanceof Array?l[c].query:[l[c].query],m=u(v,t,l[c].queryType),g=l[c].join||l[c].joinLogic,y=g=="and"?d+m:d>m?d:m;if(i<y||n&&(l[c].form===s||l[c].form===o||a(n,l[c].parent))){i=y,r={};for(var b in l[c])r[b]=l[c][b];r.filterSchemaId=f;if(n&&n.nodeName=="FORM"){var w=n.getAttribute("method");w&&(r.method=w),r.form=n}}}}return r},parseStartUrl:function(e){return e.substring(0,e.indexOf("/",1))},getParentPath:function(){var e=location.pathname,t=e.lastIndexOf("/");return t>-1?e.substring(0,t+1):""},parseAxAttr:function(t){if(t.iswrapped)return;var r=e.parseAttr(t,n(""));return r&&(t.nodeName=="FORM"&&(r.method=t.getAttribute("method"),r.form=t),r.scope=t),r},wrapAnchor:function(t,n){if(t.protocol=="mailto:"||t.protocol=="javascript:")return;if(t.iswrapped)return;var r,i;if(t.nodeName=="FORM"){r=t.getAttribute("action");if(!r){r=location.href;var s=r.indexOf("#");r=s==-1?r:r.substring(0,s)}var o=document.createElement("a");o.href=r;var u=e.parseUri(o.href);r=u.path,i=u.query,delete o}else{if(!t.href)return;var u=e.parseUri(t.href);r=u.path,i=u.query}i&&i.startWith("?")&&(i=i.substring(1));if(e.browser.opera||e.browser.msie)r="/"+r;var a=this.getOptions(r,i,t);if(!a&&!n)return;a||(a={}),n||(n={}),e.extend(n,a,1);if(n.type=="skip"||n.type=="nowrap"||n.wrap!=null&&!n.wrap||n.nowrap)return;if(!n.target&&t.getAttribute("target"))return;if(n.id==null)return;this.wrapOps(t,n)},wrapSharp:function(t,n,r){if(t.iswrapped)return;var i=location.protocol,s=location.host,o=i+"//"+s+location.pathname+location.search+"#",u=t.nodeName=="FORM"?t.getAttribute("action"):t.href;if(u&&u.endWith("#")){u.startWith(i)||(u=i+"//"+s+u);if(r){var a=document.createElement("a");a.href=r+"#",r=a.href,delete a;if(!r.startWith(i)){var f=r.startWith("/")?"":e.parseUri(location.href).directory;r=i+"//"+s+f+r}}if(u==o||u==r)n||(n={}),t.sharp=n.sharp=1,this.wrapOps(t,n)}},wrapOps:function(n,r){if(!r)return;n.options=r,n.iswrapped=1;var i=document.createAttribute("iswrapped");i.nodeValue=1,n.setAttributeNode(i);var s=n.nodeName=="FORM"?"submit":"click",o="onprev"+s,u="on"+s;if(!r.overwrite&&!t.OVERWRITE)if(e.browser.msie){if(n[u]){var a=document.createAttribute(o),f=n.attributes[u]||{};a.nodeValue=f.nodeValue||n[u],n.setAttributeNode(a)}}else n[o]=n[u];if(s=="submit"){var l=n.getElementsByTagName("input");for(var c=0,h=l.length;c<h;c++){var p=l[c].type;if(p!="image"&&p!="submit")continue;FLAX.addEvent(l[c],"click",p=="image"?function(e){e||(e=window.event);var t=e.target||e.srcElement,r=e.offsetX!=null?e.offsetX:e.pageX-t.offsetLeft+1,i=e.offsetY!=null?e.offsetY:e.pageY-t.offsetTop+1,s="",o=t.getAttribute("name"),u=t.getAttribute("value"),a=o||"";a&&(a+="."),u&&o!=null&&(s+=o+"="+u+"&"),s="&"+s+a+"x="+r+"&"+a+"y="+i,n.submitValue=s}:function(e){e||(e=window.event);var t=e.target||e.srcElement,r=t.getAttribute("name"),i=t.getAttribute("value"),s="";r!=null&&(s+="&"+r+"="+i),n.submitValue=s})}}n[u]=function(t){t=t||window.event||{};if(t.ctrlKey||t.shiftKey)return;try{var n=null;if(e.browser.msie){if(this.attributes[o]){var r=this.attributes[o].nodeValue;r&&(typeof r=="string"&&(r.trim().startWith("function")||(r="function(e){"+r+"}"),r=window.eval("FLAX.tmp="+r)),n=r.call(this,t))}}else this[o]&&typeof this[o]=="function"&&(n=this[o](t));if(n===!1)return!1}catch(i){error(i)}var s=this.options;if(this.nodeName=="FORM"&&this.enctype=="multipart/form-data")return s.multipart&&s.multipart(this),!0;if(!s.sharp)try{if(s.handler)s.handler(this,s);else{var u=this.getAttribute("action")||this.href;u||(u=location.href),u=e.browser.msie?encodeURI(u):u;if(this.nodeName=="FORM"&&(!s.method||s.method.toLowerCase()!="post")){var a=e.parseUri(u);u=u.replace("?"+a.query,"").replace("#"+a.anchor,"")}u=e.delHost(u);var f=s.changer||s.urlChanger;u=f?f(u,this):u;var l=u.indexOf("#");l>-1&&(u=u.substring(0,l)),window[s.type=="data"?"dax":"hax"](u,s)}}catch(i){error(i)}return!1},s=="submit"&&(n.submit=n.onsubmit)},wrap:function(t,i){if(!t){t=document;for(var s in this.schema)this.wrap(s,i)}var o,u=t.nodeName;if(u=="A"||u=="FORM"||u=="AREA")o=[t];else{t=e.get(t);if(!t)return;r(t)&&(t=document);var a=e.collectionToArray,f="getElementsByTagName";o=a(t[f]("a")).concat(a(t[f]("form")),a(t[f]("area")))}for(var l=0,c=o.length;l<c;l++){var h=o[l],p=h.attributes[n("wrap")],d=p==null||p.nodeValue!="false"&&p.nodeValue!="0"&&p.nodeValue!=0;h.getAttribute("iswrapped")&&h.setAttribute("iswrapped",!!h.getAttribute("onclick")||!!h.getAttribute("onsubmit"));if(!e.isXss(h.getAttribute("href")||h.getAttribute("action"))&&!h.getAttribute("iswrapped")&&d){var v=this.parseAxAttr(h),m=this.fireEvent("beforewrap",{el:h,ops:v,layer:t,url:i});if(m===!1)continue;this.wrapSharp(h,v,i),this.wrapAnchor(h,v)}h=null}return o=null,this}},Include:{parse:function(t){t?t=e.get(t):t=document;var n=t.getElementsByTagName("include");while(n.length>0)e.Include.apply(n[0])},apply:function(t){t=e.get(t);var i=e.parseAttr(t),s=e.parseAttr(t,n(""));e.extend(i,s);if(i&&(i.url||i.src)){var o=document.createElement("a");i.url||(i.url=i.src),o.href=i.url,s=e.Filter.getOptions(o.pathname,o.search),delete o,s&&e.extend(i,s,1);var u=document.createElement("span");u.style.display="none",u.id=i.id=t.id?t.id:e.genId(),r(u,1),t.parentNode.replaceChild(u,t),i.nohistory==null&&(i.nohistory=1),hax(i)}},fix:function(t){return e.browser.msie&&/<include/i.test(t)?t='<div style="display:none">&nbsp;</div>'+t:e.browser.mozilla&&(t=t.replaceAll("<INCLUDE","<include")),t}},Uploader:function(t,n,r,i,s){typeof t=="object"&&t.nodeName!="FORM"&&(n=t.beforeStart,r=t.afterFinish,i=t.manual,s=t.html,t=from.form);var o,u=null,a=this;this.init=function(){t=e.get(t);var f=e.genId();t.setAttribute("target",f),o=document.createElement("div"),o.innerHTML='<iframe style="display:none" src="javascript:true" onload="this._onload()" id="'+f+'" name="'+f+'"></iframe>',this.iframe=u=o.firstChild,this.setAfterFinish=setAfterFinish=function(t){u._onload=function(){var n=this.contentWindow||this.contentDocument,r=n.document.body,i=r[s?"innerHTML":e.browser.msie?"innerText":"textContent"];t(i,a)}};if(r){var l=function(){setAfterFinish(r),i&&t.submit()};i?u._onload=l:l()}else u._onload=function(){};t.appendChild(o),t.setAttribute("target",f),n&&n(a)},this.init(),this.getIframe=function(){return u},this.cancel=function(){t.reset(),a.destroy()},this.destroy=function(){u.src="javascript:true",FLAX.remove(o),o=null}},addEventsListener:function(t){return t.prototype&&(t=t.prototype),t.on=function(e,t,n){e instanceof Array||(e=[e]);for(var r=0,i=e.length;r<i;r++){var s=e[r];n||this.un(s,t),this.events||(this.events={}),this.events[s]||(this.events[s]=[]),this.events[s].push(t)}},t.un=function(t,n,r){t instanceof Array||(t=[t]);for(var i=0,s=t.length;i<s;i++){var o=t[i];if(!n)return this.unall(o);var u=this.events?this.events[o]:null;u&&(e.arrayRemoveOf(u,n,!r),this.events[o]=u)}},t.unall=function(e){this.events&&(e?delete this.events[e]:delete this.events)},t.fireEvent=function(e,t){var n=this.events?this.events[e]:null;if(n){var r=null,i=[].slice.call(arguments);i.shift(),i.push(e);for(var s=0;s<n.length;s++)try{var o=n[s].apply(this,i);r!==!1&&o!=null&&(r=o)}catch(u){error(u)}return r}},t},addContainerListener:function(t){t.prototype&&(t=t.prototype);var n={},r={};return t.register=function(e){var t=n[e.id];if(t)for(var i in t)for(var s=0,o=t[i].length;s<o;s++)e.on(i,t[i][s]);for(var i in r){var t=r[i];for(var s=0,o=t.length;s<o;s++)e.on(i,t[s])}},t.on=function(e,t,r,i){e instanceof Array||(e=[e]);for(var s=0,o=e.length;s<o;s++){var u=e[s];n[u]||(n[u]={}),n[u][t]||(n[u][t]=[]),n[u][t].push(r),this.thread[u]&&this.thread[u].on(t,r,i)}},t.onall=function(e,t,n){r[e]||(r[e]=[]),r[e].push(t);var i=this.thread;for(var s in i)i[s]&&i[s].on(e,t,n)},t.unall=function(t,n,i){if(t)if(n){var s=r[t];e.arrayRemoveOf(s,n,!i),r[t]=s}else r[t]=[];else r={};var o=this.thread;for(var u in o)o[u]&&o[u].un(t,n,i)},t.un=function(t,r,i,s){t instanceof Array||(t=[t]);for(var o=0,u=t.length;o<u;o++){var a=t[o];if(!i){a?n[a]&&(r?delete n[a][r]:delete n[a]):n={};var f={};a?f[a]=this.thread[a]:f=this.thread;for(var l in f)f[l]&&f[l].unall(r)}else{var c=n[a]?n[a][r]:null;c&&(e.arrayRemoveOf(c,i,!s),n[a][r]=c),this.thread[a]&&this.thread[a].un(r,i,s)}}},t.fireEvent=function(e,t,n){if(this.thread[e])return this.thread[e].fireEvent(t,n)},t},Html:{thread:{},ASYNCHRONOUS:1,storage:[]},Data:{thread:{}},playsound:function(e,t){var n=document.createElement("div");t==null&&(t=10),n.setAttribute("style","position:absolute;top:-1000px;left:-1000px");if(window.ActiveXObject){var r=document.createElement("bgsound");r.src=e,n.appendChild(r)}else n.innerHTML='<embed src="'+e+'" loop="false" autostart="true" hidden="true" mastersound>';document.body.appendChild(n),t>0&&setTimeout(function(){n.firstChild.src="",document.body.removeChild(n)},t*1e3)},enableUBR:function(){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")},Loader:{show:function(){e.showLoading(1,e.getLoader())},hide:function(){e.showLoading(0,e.getLoader())}},parseUri:function(e,t){var n={strictMode:0,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t?t:n,i=r.parser[r.strictMode?"strict":"loose"].exec(e);for(var s=0,o={};s<14;s++)o[r.key[s]]=i[s]||"";return o[r.q.name]={},o[r.key[12]].replace(r.q.parser,function(e,t,n){t&&(o[r.q.name][t]=n)}),o},showMessage:function(e,t,n){if(t==0)return;alert("Error "+t+" : "+e+"\n"+n)},replaceHtml:function(e,t){var n=typeof e=="string"?document.getElementById(e):e,r=n.cloneNode(!1);return r.innerHTML=t,n.parentNode.replaceChild(r,n),r},addTo:function(t,n){var i=n?e.get(n):document.body;t=t.join?t.join(""):t;if(!i)return warn("Warning => addTo : element = "+n+" not found, html = "+t.trim().substring(0,20)+"...");var s=document.createElement("div");s.innerHTML=t;var o=r(i);while(s.childNodes.length>0)o?i.parentNode.insertBefore(s.childNodes[0],i):i.appendChild(s.childNodes[0]);return i},writeTo:function(t,n){var i=n?e.get(n):document.body;return t=t.join?t.join(""):t,i?(r(i)?e.addTo(t,i):i.innerHTML=t,i):warn("Warning => writeTo : element = "+n+" not found, html = "+t.trim().substring(0,20)+"...")},remove:function(t){t=t instanceof Array?t:[t];for(var n=0,r=t.length;n<r;n++){var i=e.get(t[n]);i&&i.parentNode.removeChild(i)}},replace:function(t,n){return t=e.get(t),n=e.get(n),n.parentNode.replaceChild(t,n)},genId:function(){return n("genid"+t.sprt)+(e.lastGenId?++e.lastGenId:e.lastGenId=1)}});var t=e.Default,n=function(e){return t.prefix+t.sprt+e},r=e.placeMark=function(e,r){var i=n("place"+t.sprt+"mark");return e&&r!=null&&(e[i]=r),e?r==null?e[i]:e:i},i=function(e){return'<span id="'+e+'" style="display:none"><!--place of script # '+e+"//--></span>"};e.addEventsListener(e.Filter)}(FLAX),FLAX.init()};